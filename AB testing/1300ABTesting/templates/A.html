<!DOCTYPE html>
<html lang="en">
  <head>
    <script type="text/javascript">
        var timerStart = Date.now();
        console.log('Page Load:' + timerStart)
        var uniq_session = timerStart;

        var cookie = getCookie('uid');

        var uniq_session = cookie;

        if(cookie == '' || cookie == null) {
          var uid = Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 12);
          console.log('uid:' + uid)
          setCookie('uid', uid,  40)
          cookie = getCookie('uid');
          uniq_session = cookie;
        }
        function setCookie(cname, cvalue, exdays) {
          var d = new Date();
          d.setTime(d.getTime() + (exdays*24*60*60*1000));
          var expires = "expires="+ d.toUTCString();
          document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }

        function getCookie(cname) {
          var name = cname + "=";
          var decodedCookie = decodeURIComponent(document.cookie);
          var ca = decodedCookie.split(';');
          for(var i = 0; i <ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') {
                  c = c.substring(1);
              }
              if (c.indexOf(name) == 0) {
                  return c.substring(name.length, c.length);
              }
          }
          return "";
        }

        console.log('version A: cookie:' + cookie)
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- TODO: Feel free to modify anything inside main.css-->
    <link rel="stylesheet" href="../static/main.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <title>Find Memphis Taxis online</title>

    <style>
/* code for button changes copied and modified using https://www.w3schools.com/css/css3_buttons.asp as refrence */

.vendor-book-button {
  background-color: #111111;
  color: white;
  padding: 8px 40px;
  border-radius: 20px;
  text-align: center;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;

}

.vendor-book-button:hover {
  background-color: #ffb31a ;
  border: none;
  color: white;
}

body {
  color: #999999;
}

h1 {
  color: black;
  font-family: Verdana;
  font-size: 45px;
}

h2 {
  color: black;
  font-family: Verdana;
  font-size: 25px;
}

</style>

  </head>

  <body>


    <header class="header">
      <h1 align= "center">Memphis Taxis </h1>
    </header>

    <!--
    TODO: Feel free to modify image, change layouts, appearance etc anything.
    Remember if you add any new buttons, you need to update the javascript file, for
    corresponding button id, so that clicks of that button could be logged.

    Easiest thing is to have just the two buttons we already have and try to play around
    with layouts of it.
    -->

<div class="grid-container">

    <div class="vendor-wrapper">
      <img src="../static/1.png" class="vendor-photo" />

      <h2>Yellow Cab</h2>
      <p>Safe, Reliable, 24 hour service</p>
      <button class="vendor-book-button btn btn-primary" type="submit" id="mp1">Reserve</button>
    </div>

    <div class="vendor-wrapper">
      <img src="../static/2.png" class="vendor-photo" />
      <h2>Ride Charge</h2>
      <p>Driven by certified professionals.</p>
      <button class="vendor-book-button btn btn-primary" type="submit" id="mp2">Reserve</button>
    </div>

    <div class="vendor-wrapper" >
    <img src="../static/3.png" class="vendor-photo" />
    <h2>Uber</h2>
    <p> Cheap and convenient </p>
    <button class="vendor-book-button btn btn-primary" type="submit" id="mp3">Reserve</button>
    </div>

    <div class="vendor-wrapper">
      <img src="../static/4.png" class="vendor-photo" />
      <h2>Premiere Taxi</h2>
      <p>Quality service, quality price</p>
      <button class="vendor-book-button btn btn-primary" type="submit" id="mp4">Reserve</button>
    </div>
</div>

    <footer class="footer">
      <p align= "center">Not endorsed by any of the companies listed, or the city of Memphis.</p>
    </footer>

    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script>
        var timeLoaded = Date.now()
          $(document).ready(function() {
            timeLoaded =  Date.now();
            console.log('Page Load:' + timeLoaded)
            sendData(timeLoaded, 0.0, 0.0, uniq_session)
          });

        $("#mp1").on("click", function(d) {
              // Retrieve the object from storage
              var clickTime = Date.now()
              var clickObjectID = 'mp1'
              console.log('Click Time:' + clickTime)
              sendData(timeLoaded, clickTime, clickObjectID, uniq_session)
              // TODO: Feel free to make this point to different site
              window.location.href = "http://www.yellowcabofmemphis.com/"

        })


        $("#mp2").on("click", function(d) {
              // Retrieve the object from storage
              var clickTime = Date.now()
              var clickObjectID = 'mp2'
              console.log('Click Time:' + clickTime)
              sendData(timeLoaded, clickTime, clickObjectID, uniq_session)
              // TODO: Feel free to make this point to different site
              window.location.href = "https://www.ridecharge.com/s/tn-memphis/taxi-sedan-limo-shuttle"
        })

          $("#mp3").on("click", function(d) {
              // Retrieve the object from storage
              var clickTime = Date.now()
              var clickObjectID = 'mp3'
              console.log('Click Time:' + clickTime)
              sendData(timeLoaded, clickTime, clickObjectID, uniq_session)
              // TODO: Feel free to make this point to different site
              window.location.href = "https://www.uber.com/cities/memphis/"
        })

            $("#mp4").on("click", function(d) {
              // Retrieve the object from storage
              var clickTime = Date.now()
              var clickObjectID = 'mp4'
              console.log('Click Time:' + clickTime)
              sendData(timeLoaded, clickTime, clickObjectID, uniq_session)
              // TODO: Feel free to make this point to different site
              window.location.href = "https://premierofmemphis.com/contact-us/"
        })


        function sendData(timeLoaded, clickTime, clickObjectID, cook){
              var dataObj = { 'version': 'A', 'pageLoadTime': timeLoaded , 'clickTime': clickTime , 'HtmlElementID': clickObjectID, 'UniqueSession' :uniq_session};
              console.log(JSON.stringify(dataObj))
               $.ajax({
                   type: 'POST',
                    url: '/data',
                    async: false,
                    dataType: 'json',
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify(dataObj),
                    success: function(callback) {
                        console.log(callback);
                    },
                    error: function() {
                        $(this).html("error!");
                    }
              });
        }
     </script>
  </body>
</html>
